
<!DOCTYPE html>
<!--[if lt IE 9]><html class="lte-ie8" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html lang="en"><!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <title>GOV.UK - The best place to find government services and information</title>

    <!--[if gt IE 8]><!--><link href="/static/stylesheets/govuk-template.css?0.19.2" media="screen" rel="stylesheet" /><!--<![endif]-->
    <!--[if IE 6]><link href="/static/stylesheets/govuk-template-ie6.css?0.19.2" media="screen" rel="stylesheet" /><![endif]-->
    <!--[if IE 7]><link href="/static/stylesheets/govuk-template-ie7.css?0.19.2" media="screen" rel="stylesheet" /><![endif]-->
    <!--[if IE 8]><link href="/static/stylesheets/govuk-template-ie8.css?0.19.2" media="screen" rel="stylesheet" /><![endif]-->
    <!-- <link href="/static/stylesheets/govuk-template-print.css?0.19.2" media="print" rel="stylesheet" /> -->

    <!--[if IE 8]><link href="/static/stylesheets/fonts-ie8.css?0.19.2" media="all" rel="stylesheet" /><![endif]-->
    <!--[if gte IE 9]><!--><link href="/static/stylesheets/fonts.css?0.19.2" media="all" rel="stylesheet" /><!--<![endif]-->
    <!--[if lt IE 9]><script src="/static/javascripts/ie.js?0.19.2"></script><![endif]-->

    <link rel="shortcut icon" href="/static/images/favicon.ico?0.19.2" type="image/x-icon" />
    <link rel="mask-icon" href="/static/images/gov.uk_logotype_crown.svg?0.19.2" color="#0b0c0c" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/static/images/apple-touch-icon-152x152.png?0.19.2" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/static/images/apple-touch-icon-120x120.png?0.19.2" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/static/images/apple-touch-icon-76x76.png?0.19.2" />
    <link rel="apple-touch-icon-precomposed" href="/static/images/apple-touch-icon-60x60.png?0.19.2" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:image" content="/static/images/opengraph-image.png?0.19.2" />


    <meta name="viewport" content="width=100%, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,target-densitydpi=device-dpi, user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="/static/govuk_template-0.20.0/assets/stylesheets/govuk-elements.css" />
    <link rel="stylesheet" type="text/css" href="/static/stylesheets/application.css" />
    <link rel="stylesheet" type="text/css" href="/static/stylesheets/cms-v2.css" />


  </head>



  <body class="admin">

    <style>
      strong {
        font-weight: bold;
      }

      table td {
        text-align: right;
        padding-right: 10px;
      }

      tbody td:first-of-type {
        text-align: left;
      }

      th.stat {
        width: 110px;
        vertical-align: top;
        text-align: right;
        padding-right: 10px;
      }

      .na {
        color: lightgrey;
      }

    [aria-sort] button {
      background-color: transparent;
      border-width: 0;
      -webkit-box-shadow: 0 0 0 0;
      -moz-box-shadow: 0 0 0 0;
      box-shadow: 0 0 0 0;
      color: #005ea5;
      cursor: pointer;
      font-family: inherit;
      font-size: inherit;
      font-weight: normal;
      padding: 0;
      position: relative;
    }

    [aria-sort] button:before {
      content: " \25bc";
      position: absolute;
      right: -14px;
      top: 8px;
      font-size: 0.6em;
    }

    [aria-sort] button:after {
      content: " \25b2";
      position: absolute;
      right: -14px;
      top: -1px;
      font-size: 0.6em;
    }

    [aria-sort="ascending"] button:before,
    [aria-sort="descending"] button:before {
      content: none;
    }

    [aria-sort="ascending"] button:after {
      content: " \25b2";
      font-size: 1em;
      position: absolute;
      right: -16px;
    }

    [aria-sort="descending"] button:after {
      content: " \25bc";
      font-size: 1em;
      position: absolute;
      right: -16px;
    }

    .header-label {
      border-bottom-width: 0;
      text-align: center;
      font-weight: normal;
      border-top: 1px solid #bfc1c3;
    }

    .header-label.first {
      border-right: 1px solid #bfc1c3;
    }


    </style>

    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>


    <div id="global-header-bar"></div>

    <main id="content" role="main">

      <div class="breadcrumbs">
        <ol>
          <li><a href="/" data-event="breadcrumb-homepage">Admin</a></li>
        </ol>
      </div>

      <!-- CONTENT STARTS HERE -->

      <div class="grid-row">
        <div class="column-two-thirds">

          <h1 class="heading-xlarge">Ethnicity categorisations</h1>

          <p class="lede">Our charts and tables currently use <strong>12</strong> different categorisations of ethnicity.</p>

          <p class="ledex">Of applicable dimensions, <strong>35%</strong> have values for broad ethnic groups.</p>

        </div>
      </div>

      <div class="grid-row">
        <div class="column-full">

          <table>

            <thead>
              <tr>
                <th colspan="3" class="header-label first">&nbsp;</th>
                <th colspan="3" class="header-label" style="padding-left: 0; padding-right: 0;">Additional values shown within dimensions</th>
              </tr>
              <tr>
                <th aria-sort="none">Categorisation</th>
                <th class="stat" aria-sort="descending">Pages</th>
                <th class="stat" aria-sort="none" style="border-right: 1px solid #bfc1c3; padding-right: 20px;">Dimensions</th>
                <th class="stat" aria-sort="none" style="width: 110px;">Broad group</th>
                <th class="stat" aria-sort="none">‘All’</th>
                <th class="stat" aria-sort="none">‘Unknown’</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2011 Census: 18 categories</td>
                <td>41</td>
                <td>91</td>
                <td>45%</td>
                <td>100%</td>
                <td>89%</td>
              </tr>
              <tr>
                <td>2001 Census: 16 categories</td>
                <td>23</td>
                <td>91</td>
                <td>15%</td>
                <td>25%</td>
                <td>100%</td>
              </tr>
              <tr>
                <td>18 categories (2001 census but with added Irish Traveller and Gypsy/Roma)</td>
                <td>13</td>
                <td>73</td>
                <td>89%</td>
                <td>74%</td>
                <td>39%</td>
              </tr>
              <tr>
                <td>White, Other</td>
                <td>15</td>
                <td>43</td>
                <td data-sort-value="-1" class="na">N/A</td>
                <td>69%</td>
                <td>8%</td>
              </tr>
             <tr>
                <td>White British, Other</td>
                <td>3</td>
                <td>5</td>
                <td data-sort-value="-1" class="na">N/A</td>
                <td>14%</td>
                <td>13%</td>
              </tr>
              <tr>
                <td>Asian, Black, White, Other</td>
                <td>19</td>
                <td>35</td>
                <td>21%</td>
                <td>100%</td>
                <td>34%</td>
              </tr>
              <tr>
                <td>Asian and Other, Black, Mixed, White</td>
                <td>13</td>
                <td>23</td>
                <td>19%</td>
                <td data-sort-value="0">0%</td>
                <td>56%</td>
              </tr>
              <tr>
                <td>Asian, Black, Mixed, White, Other including Chinese</td>
                <td>12</td>
                <td>19</td>
                <td data-sort-value="-1" class="na">N/A</td>
                <td>75%</td>
                <td>74%</td>
              </tr>
              <tr>
                <td>Black, Indian, Pakistani and Bangladeshi, White, Other</td>
                <td>11</td>
                <td>39</td>
                <td>34%</td>
                <td>48%</td>
                <td>6%</td>
              </tr>
              <tr>
                <td>Asian, Black African, Black Caribbean, Black other, White, Other</td>
                <td>23</td>
                <td>39</td>
                <td>28%</td>
                <td>50%</td>
                <td data-sort-value="0">0%</td>
              </tr>
              <tr>
                <td>Asian, Black, Chinese, Mixed, White, Other</td>
                <td>2</td>
                <td>4</td>
                <td data-sort-value="-1" class="na">N/A</td>
                <td>50%</td>
                <td>100%</td>
              </tr>
              <tr>
                <td>Asian, Black, Mixed, White British, White other, Other</td>
                <td>12</td>
                <td>19</td>
                <td>21%</td>
                <td>100%</td>
                <td>100%</td>
              </tr>
              <tr>
                <td>Asian, Black, Chinese, Mixed, White British, White other, Other</td>
                <td>1</td>
                <td>3</td>
                <td data-sort-value="0">0%</td>
                <td>50%</td>
                <td>95%</td>
              </tr>
              <tr>
                <td>Indian, Pakistani and Bangladeshi, Asian other, Black, Mixed, White British, White other, Other</td>
                <td>4</td>
                <td>8</td>
                <td data-sort-value="0">0%</td>
                <td data-sort-value="0">0%</td>
                <td data-sort-value="0">0%</td>
              </tr>
            </tbody>
          </table>

        </div>
      </div>


  <script>
    function SortableTable(table, options) {

        this.table = table;
        this.setupOptions(options);
        this.createHeadingButtons();
        this.createStatusBox();
    };

    SortableTable.prototype.setupOptions = function(options) {
        options = options || {};
        options.statusMessage = options.statusMessage || 'Sort by %heading% (%direction%)';
        options.ascendingText = options.ascendingText || 'ascending';
        options.descendingText = options.descendingText || 'descending';
        this.options = options;
    };

    SortableTable.prototype.createHeadingButtons = function() {
        var headings = this.table.querySelectorAll('thead th')
        var heading;

        for(var i = 0; i < headings.length; i++) {
            heading = headings[i];
            if(heading.getAttribute('aria-sort')) {
                this.createHeadingButton(heading, i);
            }
        }
    };

    SortableTable.prototype.createHeadingButton = function(heading, i) {
        var text = heading.textContent;
        var button = document.createElement('button')
        button.setAttribute('type', 'button')
        button.setAttribute('data-index', i)
        button.textContent = text
        button.addEventListener('click', this.sortButtonClicked.bind(this))
        heading.textContent = '';
        heading.appendChild(button);
    };

    SortableTable.prototype.createStatusBox = function() {

        this.status = document.createElement('div')
        this.status.setAttribute('aria-live', 'polite')
        this.status.setAttribute('role', 'status')
        this.status.setAttribute('aria-atomic', 'true')
        this.status.setAttribute('class', 'sortableTable-status visuallyhidden')

        this.table.parentElement.append(this.status);
    };

    SortableTable.prototype.sortButtonClicked = function(event) {

      var columnNumber = event.target.getAttribute('data-index')
      var sortDirection = event.target.parentElement.getAttribute('aria-sort')
      var newSortDirection;
        if(sortDirection === 'none' || sortDirection === 'ascending') {
            newSortDirection = 'descending';
        } else {
            newSortDirection = 'ascending';
        }

      var tBodies = this.table.querySelectorAll('tbody')

      this.sortTBodies(tBodies,columnNumber,newSortDirection)

      for (var i = tBodies.length - 1; i >= 0; i--) {

        var rows = this.getTableRowsArray(tBodies[i])
        var sortedRows = this.sort(rows, columnNumber, newSortDirection);
        this.addRows(tBodies[i], sortedRows);

      };

      this.removeButtonStates();
      this.updateButtonState(event.target, newSortDirection);

    }

    SortableTable.prototype.sortTBodies = function(tBodies, columnNumber, sortDirection) {

      var tBodiesAsArray = []
      var _this = this

      for (var i = 0; i < tBodies.length; i++) {
        tBodiesAsArray.push(tBodies[i])
      };

      var newTbodies = tBodiesAsArray.sort(function(tBodyA, tBodyB) {

        var tBodyAHeaderRow = tBodyA.querySelector('th[scope="rowgroup"]')

        var tBodyBHeaderRow = tBodyB.querySelector('th[scope="rowgroup"]')


        if (tBodyAHeaderRow && tBodyBHeaderRow) {
          tBodyAHeaderRow = tBodyAHeaderRow.parentElement
          tBodyBHeaderRow = tBodyBHeaderRow.parentElement

          var tBodyACell = tBodyAHeaderRow.querySelectorAll('td, th')[columnNumber]
          var tBodyBCell = tBodyBHeaderRow.querySelectorAll('td, th')[columnNumber]

          var tBodyAValue = _this.getCellValue(tBodyACell)
          var tBodyBValue = _this.getCellValue(tBodyBCell)

          return _this.compareValues(tBodyAValue, tBodyBValue, sortDirection)

        } else {

          console.log('no way to compare tbodies')
          return 0
        }


      });

      for (var i = 0; i < newTbodies.length; i++) {
        this.table.append(newTbodies[i])
      };

    }

    SortableTable.prototype.compareValues = function(valueA, valueB, sortDirection) {

      if(sortDirection === 'ascending') {
          if(valueA < valueB) {
              return -1;
          }
          if(valueA > valueB) {
              return 1;
          }
          return 0;
      } else {
          if(valueB < valueA) {
              return -1;
          }
          if(valueB > valueA) {
              return 1;
          }
          return 0;
      }

    }

    SortableTable.prototype.updateButtonState = function(button, direction) {
        button.parentElement.setAttribute('aria-sort', direction);
        var message = this.options.statusMessage;
        message = message.replace(/%heading%/, button.textContent);
        message = message.replace(/%direction%/, this.options[direction+'Text']);
        this.status.textContent = message;
    };

    SortableTable.prototype.removeButtonStates = function() {

        var tableHeaders = this.table.querySelectorAll('thead th')

        for (var i = tableHeaders.length - 1; i >= 0; i--) {
          tableHeaders[i].setAttribute('aria-sort', 'none')
        };

    };

    SortableTable.prototype.addRows = function(tbody, rows) {
        for(var i = 0; i < rows.length; i++) {
            tbody.append(rows[i]);
        }
    };

    SortableTable.prototype.getTableRowsArray = function(tbody) {
        var rows = [];
        var trs = tbody.querySelectorAll('tr');
        for (var i = 0; i < trs.length; i++) {
            rows.push(trs[i]);
        }
        return rows;
    };

    SortableTable.prototype.sort = function(rows, columnNumber, sortDirection) {

        var _this = this

        var newRows = rows.sort(function(rowA, rowB) {

          var tdA = rowA.querySelectorAll('td, th')[columnNumber]
          var tdB = rowB.querySelectorAll('td, th')[columnNumber]

          var rowAIsHeader = rowA.querySelector('th[scope="rowgroup"]')
          var rowBIsHeader = rowB.querySelector('th[scope="rowgroup"]')

          var valueA = _this.getCellValue(tdA)
          var valueB = _this.getCellValue(tdB)

            if (rowAIsHeader) {
              return -1
            } else if (rowBIsHeader) {
              return 1
            } else {

              if(sortDirection === 'ascending') {
                  if(valueA < valueB) {
                      return -1;
                  }
                  if(valueA > valueB) {
                      return 1;
                  }
                  return 0;
              } else {
                  if(valueB < valueA) {
                      return -1;
                  }
                  if(valueB > valueA) {
                      return 1;
                  }
                  return 0;
              }

            }

        });
        return newRows

    };

    SortableTable.prototype.getCellValue = function(cell) {

      var cellValue

      if (cell.children.length == 1 && cell.children[0].tagName == "TIME") {

        var timeElement = cell.children[0]

        if (timeElement.getAttribute('datetime')) {
          cellValue = Date.parse(timeElement.getAttribute('datetime'))
        } else {
          cellValue = Date.parse(timeElement.textContent)
        }

      } else {

        cellValue = cell.getAttribute('data-sort-value') || cell.textContent
        cellValue = parseFloat(cellValue) || cellValue

      }


      return cellValue
    }

    document.addEventListener('DOMContentLoaded', function() {

      var tables = document.querySelectorAll('table');

      for (var i = tables.length - 1; i >= 0; i--) {

        var table = tables[i]

        var sortableTable = new SortableTable(table, {});

      };

    })
  </script>


      <!-- CONTENT ENDS HERE -->
    </main>
    <footer class="group js-footer" id="footer" role="contentinfo">

      <div class="footer-wrapper">

        <div class='footer-categories grid-row'>
          <div class='column-one-third'>
            <h2>Contact</h2>
            <ul>
              <li>
                  <a href="mailto:ethnicity@cabinetoffice.gov.uk">ethnicity@cabinetoffice.gov.uk</a>
              </li>
              <li>
                  <a href="/">Site preview</a>
              </li>
              <li>
                  <a href="/cms/">CMS</a>
              </li>
              <li>
                  <a href="/prototype/">Prototype</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="footer-meta">
          <div class="footer-meta-inner">
            <div class="open-government-licence">
              <p class="logo"><a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license">Open Government Licence</a></p>
                <p>All content is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license">Open Government Licence v3.0</a>, except where otherwise stated</p>
            </div>
          </div>
          <div class="copyright">
            <a href="http://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/copyright-and-re-use/crown-copyright/">&copy; Crown copyright</a>
          </div>
        </div>
      </div>
    </footer>

    <div id="global-app-error" class="app-error hidden"></div>
    <script src="/static/javascripts/govuk-template.js?0.19.2"></script>
    <script type="text/javascript" src="/static/vendor/jquery.min.js"></script>
    <script type="text/javascript" src="/static/javascripts/all.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/5.0.11/highcharts.js"></script>
    <script type="text/javascript" src="/static/vendor/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="/static/vendor/underscore-min.js"></script>
    <script src="/static/javascripts/rd-data-tools.js"></script>
    <script src="/static/javascripts/rd-graph.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/5.0.11/modules/exporting.js"></script>
    </script>
    <script>if (typeof window.GOVUK === 'undefined') document.body.className = document.body.className.replace('js-enabled', '');</script>
  </body>
</html>